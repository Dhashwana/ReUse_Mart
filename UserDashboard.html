<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard</title>
    <link rel="stylesheet" href="UserDashStyle.css">
</head>
<body>

<nav class="navbar">
    <div class="nav-left">
        ReUse Mart
    </div>

    <div class="nav-center">
        <span class="nav-link active">‚ôªÔ∏è Recycle</span>
        <span class="divider">|</span>
        <span class="nav-link" onclick="goToReuse()">üîÅ Reuse</span>
    </div>

    <div class="nav-right">
        <span id="welcomeUser">Welcome</span>
        <button id="logoutBtn">Logout</button>
    </div>
</nav>

<div class="dashboard">
    <h2>Recycle Dashboard</h2>

    <div class="cards">
        <div class="card">
            <h3 id="totalWaste">0</h3>
            <p>Total Waste Listed</p>
        </div>
        <div class="card">
            <h3 id="pendingWaste">0</h3>
            <p>Pending Requests</p>
        </div>
        <div class="card">
            <h3 id="completedWaste">0</h3>
            <p>Completed Pickups</p>
        </div>
    </div>

    <button class="add-btn" id="openModal">+ Add Waste</button>

    <table id="wasteTable">
        <thead>
            <tr>
                <th>Type</th>
                <th>Quantity</th>
                <th>Unit</th>
                <th>Date</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<div class="modal" id="wasteModal">
    <div class="modal-content">
        <span class="close-btn" id="closeModal">&times;</span>
        <h2>Add Waste</h2>

        <form id="wasteForm">
            <select id="wasteType" required>
                <option value="">Select Waste Type</option>
                <option>Plastic</option>
                <option>Paper</option>
                <option>Glass</option>
                <option>Metal</option>
                <option>E-Waste</option>
                <option>Clothes</option>
                <option>Cardboard</option>
                <option>Other</option>
            </select>

            <input type="number" id="quantity" placeholder="Quantity" required>

            <select id="unit" required>
                <option value="">Select Unit</option>
                <option>Pieces</option>
                <option>Kg</option>
                <option>Bags</option>
                <option>Boxes</option>
            </select>

            <input type="date" id="pickupDate" required>

            <textarea id="notes" placeholder="Additional Notes (Optional)"></textarea>

            <button type="submit">Submit</button>
        </form>
    </div>
</div>

<script>
const loggedInUser = JSON.parse(localStorage.getItem("loggedInUser"));

if (!loggedInUser || loggedInUser.role !== "user") {
    window.location.href = "Login.html";
}

document.getElementById("welcomeUser").innerText =
    "Welcome, " + loggedInUser.name;

document.getElementById("logoutBtn").addEventListener("click", function () {
    localStorage.removeItem("loggedInUser");
    window.location.href = "Login.html";
});

function goToReuse() {
    window.location.href = "Reuse.html";
}
</script>

<script type="module" src="UserDashJS.js"></script>
</body>
</html>
